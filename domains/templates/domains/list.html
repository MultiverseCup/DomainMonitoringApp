{% extends 'base.html' %}
{% load django_bootstrap5 %}  <!-- –ò–ó–ú–ï–ù–ò–õ–ò –ó–î–ï–°–¨ -->

{% block title %}–ú–æ–∏ –¥–æ–º–µ–Ω—ã{% endblock %}

{% block content %}
<!-- –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
<div class="row mb-4">
    <div class="col-md-4">
        <div class="card text-white bg-primary">
            <div class="card-body">
                <h5 class="card-title">{{ stats.total }}</h5>
                <p class="card-text">–í—Å–µ–≥–æ –¥–æ–º–µ–Ω–æ–≤</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-warning">
            <div class="card-body">
                <h5 class="card-title">{{ stats.expiring_soon }}</h5>
                <p class="card-text">–ò—Å—Ç–µ–∫–∞—é—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-danger">
            <div class="card-body">
                <h5 class="card-title">{{ stats.critical }}</h5>
                <p class="card-text">–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –±–ª–∏–∑–∫–æ –∫ –æ–∫–æ–Ω—á–∞–Ω–∏—é</p>
            </div>
        </div>
    </div>
</div>

<div class="d-flex justify-content-between mb-3">
    <h2>–ú–æ–∏ –¥–æ–º–µ–Ω—ã</h2>
    <a href="{% url 'add_domain' %}" class="btn btn-success">+ –î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω</a>
</div>

<table class="table table-hover">
    <thead>
        <tr>
            <th>–î–æ–º–µ–Ω</th>
            <th>–†–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä</th>
            <th>–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</th>
            <th>–î–Ω–µ–π –æ—Å—Ç–∞–ª–æ—Å—å</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
        {% for domain in domains %}
        <tr class="{% if domain.days_left <= 7 %}domain-critical
                   {% elif domain.days_left <= 30 %}domain-warning
                   {% else %}domain-ok{% endif %}">
            <td><strong>{{ domain.name }}</strong></td>
            <td>{{ domain.registrar|default:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ" }}</td>
            <td>{{ domain.expiration_date|date:"d.m.Y"|default:"–ù–µ —É–∫–∞–∑–∞–Ω–∞" }}</td>
            <td>
                <span class="days-badge
                    {% if domain.days_left <= 7 %}bg-danger
                    {% elif domain.days_left <= 30 %}bg-warning
                    {% else %}bg-success{% endif %}">
                    {{ domain.days_left|default:"?" }}
                </span>
            </td>
            <td>
                {% if domain.days_left <= 7 %}
                <span class="text-danger">–°—Ä–æ—á–Ω–æ –ø—Ä–æ–¥–ª–∏—Ç—å!</span>
                {% elif domain.days_left <= 30 %}
                <span class="text-warning">–°–∫–æ—Ä–æ –∏—Å—Ç–µ–∫–∞–µ—Ç</span>
                {% else %}
                <span class="text-success">–í –Ω–æ—Ä–º–µ</span>
                {% endif %}
            </td>
            <td>
                <button class="btn btn-sm btn-outline-danger delete-btn"
                        data-domain-id="{{ domain.id }}"
                        data-domain-name="{{ domain.name }}"
                        title="–£–¥–∞–ª–∏—Ç—å –¥–æ–º–µ–Ω">
                    üóëÔ∏è
                </button>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" class="text-center">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}